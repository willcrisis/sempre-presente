"use strict";function convertNumberToDate(e){return new Date(e)}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function routesConfig(e,a,n){n.html5Mode(!0).hashPrefix("!"),a.otherwise("/"),e.state("app",{url:"/",template:"<app></app>",auth:!0}).state("alunos",{url:"/alunos",template:"<alunos></alunos>",auth:!0}).state("professores",{url:"/professores",template:"<professores></professores>",auth:!0}).state("aluno",{url:"/aluno/:id",controller:AlunoRoute,controllerAs:"ctrl",template:'<aluno id="ctrl.id"></aluno>',auth:!0}).state("professor",{url:"/professor",template:"<professor></professor>",auth:!0}).state("aulas",{url:"/aulas",template:"<aulas></aulas>",auth:!0}).state("login",{url:"/login",template:"<login></login>",auth:!1})}routesConfig.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app",["ui.router","willcrisis.angular-auth","firebase"]);var _createClass=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),Aluno=function(){function e(a,n){_classCallCheck(this,e),this.stateService=a,this.alunoService=n,this.aluno=this.id?this.alunoService.getAluno(this.id):{}}return e.$inject=["$state","alunoService"],_createClass(e,[{key:"save",value:function(e){e.$id?this.alunoService.editAluno(e):this.alunoService.addAluno(e),this.stateService.go("alunos")}}]),e}();angular.module("app").component("aluno",{templateUrl:"app/containers/Aluno.html",controller:Aluno,bindings:{id:"<"}});var Alunos=["alunoService",function e(a){_classCallCheck(this,e),this.alunoService=a}];Alunos.$inject=["alunoService"],angular.module("app").component("alunos",{templateUrl:"app/containers/Alunos.html",controller:Alunos});var App=function a(){_classCallCheck(this,a)};angular.module("app").component("app",{templateUrl:"app/containers/App.html",controller:App});var Aulas=["aulaService",function n(e){_classCallCheck(this,n),this.aulaService=e}];Aulas.$inject=["aulaService"],angular.module("app").component("aulas",{templateUrl:"app/containers/Aulas.html",controller:Aulas});var _createClass=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),Login=function(){function e(a,n,t){_classCallCheck(this,e),this.authService=a,this.stateService=n,this.usuarioService=t}return e.$inject=["auth","$state","usuarioService"],_createClass(e,[{key:"login",value:function(e,a){var n=this;this.authService.loginWithEmailPassword(e,a).then(function(){n.stateService.go("app")})}},{key:"loginComGoogle",value:function(){var e=this;this.authService.loginWithGoogle().then(function(a){e.salvarUsuario(a),e.stateService.go("app")})}},{key:"loginComFacebook",value:function(){var e=this;this.authService.loginWithFacebook().then(function(a){console.log(a),e.salvarUsuario(a),e.stateService.go("app")})}},{key:"salvarUsuario",value:function(e){var a=this.usuarioService.get(e.uid);a.nome=e.displayName,a.email=e.email,a.foto=e.photoURL,a.$save()}}]),e}();angular.module("app").component("login",{templateUrl:"app/containers/Login.html",controller:Login});var _createClass=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),Professor=function(){function e(a,n,t){var r=this;_classCallCheck(this,e),this.stateService=a,this.professorService=n,this.usuarios=[],t.list().$loaded().then(function(e){r.professorService.list().$loaded().then(function(a){var n=a.map(function(e){return e.$value});e.forEach(function(e){n.indexOf(e.$id)===-1&&r.usuarios.push(e)})})})}return e.$inject=["$state","professorService","usuarioService"],_createClass(e,[{key:"save",value:function(e){this.professorService.add(e),this.stateService.go("professores")}}]),e}();angular.module("app").component("professor",{templateUrl:"app/containers/Professor.html",controller:Professor});var Professores=["professorService","usuarioService",function t(e,a){var n=this;_classCallCheck(this,t),this.professorService=e,this.professores=[],this.professorService.list().$loaded().then(function(e){e.forEach(function(e){n.professores.push(a.get(e.$value))})})}];Professores.$inject=["professorService","usuarioService"],angular.module("app").component("professores",{templateUrl:"app/containers/Professores.html",controller:Professores});var Card=function r(){_classCallCheck(this,r),this.tamanho=this.tamanho||3};angular.module("app").component("card",{templateUrl:"app/components/Card.html",controller:Card,transclude:!0,bindings:{label:"@",state:"@",tamanho:"@"}});var LabeledInput=function l(){_classCallCheck(this,l),this.type=this.type||"text"};angular.module("app").component("labeledInput",{templateUrl:"app/components/LabeledInput.html",controller:LabeledInput,bindings:{label:"@",name:"@",type:"@",ngModel:"=",ngRequired:"=?",ngReadonly:"=?",ngDisabled:"=?"}});var _createClass=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),Menu=function(){function e(a,n){_classCallCheck(this,e),this.authService=a,this.stateService=n}return e.$inject=["auth","$state"],_createClass(e,[{key:"logout",value:function(){var e=this;this.authService.logout().then(function(){e.stateService.go("login")})}}]),e}();angular.module("app").component("menu",{templateUrl:"app/components/Menu.html",controller:Menu});var MenuItem=function o(){_classCallCheck(this,o)};angular.module("app").component("menuItem",{templateUrl:"app/components/MenuItem.html",controller:MenuItem,bindings:{label:"@",state:"&"}});var _createClass=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),AlunoService=function(){function e(a){_classCallCheck(this,e),this.alunos=a(firebase.database().ref().child("alunos"))}return e.$inject=["$firebaseArray"],_createClass(e,[{key:"listAlunos",value:function(){return this.alunos}},{key:"getAluno",value:function(e){var a=this.alunos.$getRecord(e);return a&&(a.dataNascimento=convertNumberToDate(a.dataNascimento)),a}},{key:"addAluno",value:function(e){return e.dataNascimento=e.dataNascimento.getTime(),this.alunos.$add(e),this.listAlunos()}},{key:"editAluno",value:function(e){return e.dataNascimento=e.dataNascimento.getTime(),this.alunos.$save(e),this.listAlunos()}},{key:"deleteAluno",value:function(e){return this.alunos.$remove(e),this.listAlunos()}}]),e}();angular.module("app").service("alunoService",AlunoService);var _createClass=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),AulaService=function(){function e(a){_classCallCheck(this,e),this.aulas=a(firebase.database().ref().child("aulas"))}return e.$inject=["$firebaseArray"],_createClass(e,[{key:"list",value:function(){return this.aulas}},{key:"get",value:function(e){var a=this.aulas.$getRecord(e);return a&&(a.data=convertNumberToDate(a.data)),a}},{key:"add",value:function(e){return e.data=e.data.getTime(),this.aulas.$add(aluno),this.list()}},{key:"edit",value:function(e){return e.data=e.data.getTime(),this.aulas.$save(e),this.list()}}]),e}();angular.module("app").service("aulaService",AulaService);var _createClass=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),ProfessorService=function(){function e(a){_classCallCheck(this,e),this.professores=a(firebase.database().ref().child("professores"))}return e.$inject=["$firebaseArray"],_createClass(e,[{key:"list",value:function(){return this.professores}},{key:"add",value:function(e){return this.professores.$add(e),this.list()}},{key:"remove",value:function(e){return this.professores.$remove(e),this.list()}}]),e}();angular.module("app").service("professorService",ProfessorService);var _createClass=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),UsuarioService=function(){function e(a,n,t){_classCallCheck(this,e),this.usuarios=a(firebase.database().ref().child("usuarios")),this.firebaseObjectService=n,this.authService=t}return e.$inject=["$firebaseArray","$firebaseObject","auth"],_createClass(e,[{key:"list",value:function(){return this.usuarios}},{key:"get",value:function(e){return e||(e=this.authService.uid),this.firebaseObjectService(firebase.database().ref().child("usuarios").child(e))}},{key:"add",value:function(e){return this.usuarios.$add(e),this.list()}},{key:"edit",value:function(e){return this.usuarios.$save(e),this.list()}},{key:"remove",value:function(e){return this.usuarios.$remove(e),this.list()}}]),e}();angular.module("app").service("usuarioService",UsuarioService);var AlunoRoute=["$stateParams",function s(e){_classCallCheck(this,s),this.id=e.id}];AlunoRoute.$inject=["$stateParams"],angular.module("app").config(routesConfig),angular.module("app").run(["$templateCache",function(e){e.put("app/components/Card.html",'<div class="panel panel-default col-sm-{{$ctrl.tamanho}}" ui-sref="{{$ctrl.state}}">\r\n  <div class="panel-body" ng-transclude="">\r\n  </div>\r\n</div>\r\n'),e.put("app/components/LabeledInput.html",'<div class="form-group">\r\n  <label class="control-label">{{$ctrl.label}}</label>\r\n  <input class="form-control" type="{{$ctrl.type}}" name="{{$ctrl.name}}" ng-model="$ctrl.ngModel" ng-required="$ctrl.ngRequired" ng-readonly="$ctrl.ngReadonly" ng-disabled="$ctrl.ngDisabled">\r\n</div>'),e.put("app/components/Menu.html",'<nav class="navbar navbar-inverse navbar-fixed-top">\r\n  <div class="container-fluid">\r\n    <div class="navbar-header">\r\n      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu-principal" aria-expanded="false" auth-logged-in="">\r\n        <span class="sr-only">Toggle navigation</span>\r\n        <span class="icon-bar"></span>\r\n        <span class="icon-bar"></span>\r\n        <span class="icon-bar"></span>\r\n      </button>\r\n      <a class="navbar-brand" href="javascript:void(0)" ui-sref="app">SemprePresente</a>\r\n    </div>\r\n    <div class="collapse navbar-collapse" id="menu-principal" auth-logged-in="">\r\n      <ul class="nav navbar-nav">\r\n        <li><a href="javascript:void(0)" ui-sref="app">Início</a></li>\r\n        <li><a href="javascript:void(0)" ui-sref="aulas">Aulas</a></li>\r\n        <li><a href="javascript:void(0)" ui-sref="alunos">Alunos</a></li>\r\n        <li><a href="javascript:void(0)" ui-sref="professores">Professores</a></li>\r\n      </ul>\r\n      <ul class="nav navbar-nav navbar-right">\r\n        <li class="dropdown">\r\n          <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><img ng-src="{{$ctrl.authService.photoURL}}" class="img-circle" style="width: 20px"> <auth-display-name></auth-display-name><span class="caret"></span></a>\r\n          <ul class="dropdown-menu">\r\n            <li><a href="javascript:void(0)" ng-click="$ctrl.logout()">Logout</a></li>\r\n          </ul>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</nav>\r\n'),e.put("app/components/MenuItem.html",'<a href="javascript:void(0)" ui-sref="{{$ctrl.state}}">{{$ctrl.label}}</a>'),e.put("app/containers/Aluno.html",'<form name="alunoForm" ng-submit="alunoForm.$valid && $ctrl.save($ctrl.aluno)">\r\n  <labeled-input label="Nome" name="nome" ng-model="$ctrl.aluno.nome" ng-required="true"></labeled-input>\r\n  <labeled-input label="Data de Nascimento" name="dataNascimento" ng-model="$ctrl.aluno.dataNascimento" ng-required="true" type="date"></labeled-input>\r\n  <labeled-input label="Telefone" name="telefone" ng-model="$ctrl.aluno.telefone"></labeled-input>\r\n  <labeled-input label="Nome do Pai" name="pai" ng-model="$ctrl.aluno.pai"></labeled-input>\r\n  <labeled-input label="Nome da Mãe" name="mae" ng-model="$ctrl.aluno.mae"></labeled-input>\r\n  <labeled-input label="Telefone do Responsável" name="telefoneResponsavel" ng-model="$ctrl.aluno.telefoneResponsavel"></labeled-input>\r\n\r\n  <div class="action-buttons">\r\n    <button class="btn btn-primary" type="submit">Salvar</button>\r\n  </div>\r\n</form>'),e.put("app/containers/Alunos.html",'<a href="javascript:void(0)" ui-sref="aluno" class="btn btn-default">Novo Aluno</a>\r\n<table class="table table-striped table-hover">\r\n  <thead>\r\n    <tr>\r\n      <th>Nome</th>\r\n      <th>Data de Nascimento</th>\r\n      <th>Telefone</th>\r\n      <th>Nome do Pai</th>\r\n      <th>Nome da Mãe</th>\r\n      <th>Telefone do Responsável</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr ng-repeat="item in $ctrl.alunoService.listAlunos()">\r\n      <td ui-sref="aluno({id:item.$id})">{{item.nome}}</td>\r\n      <td ui-sref="aluno({id:item.$id})">{{item.dataNascimento | date}}</td>\r\n      <td ui-sref="aluno({id:item.$id})">{{item.telefone}}</td>\r\n      <td ui-sref="aluno({id:item.$id})">{{item.pai}}</td>\r\n      <td ui-sref="aluno({id:item.$id})">{{item.mae}}</td>\r\n      <td ui-sref="aluno({id:item.$id})">{{item.telefoneResponsavel}}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n'),e.put("app/containers/App.html",'<card state="aluno">Novo Aluno</card>\r\n<card state="aula">Nova Aula</card>\r\n<card state="aulas">Aulas</card>\r\n<card state="alunos">Alunos</card>\r\n<card state="professores">Professores</card>\r\n<card state="professor">Novo Professor</card>\r\n'),e.put("app/containers/Aulas.html",'<a href="javascript:void(0)" ui-sref="aula" class="btn btn-default">Nova Aula</a>\r\n<table class="table table-striped table-hover">\r\n  <thead>\r\n    <tr>\r\n      <th>Data</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr ng-repeat="item in $ctrl.aulaService.list()">\r\n      <td ui-sref="aula({id:item.$id})">{{item.data | date}}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n'),e.put("app/containers/Login.html",'<div class="container" style="margin-top:30px">\r\n  <div class="col-md-4 col-md-offset-4">\r\n    <div class="panel panel-default">\r\n      <div class="panel-heading"><h3 class="panel-title"><strong>Login</strong></h3></div>\r\n      <div class="panel-body">\r\n        <form name="loginForm" role="form" ng-submit="loginForm.$valid && $ctrl.login($ctrl.email, $ctrl.senha)">\r\n          <labeled-input label="E-mail" name="email" ng-model="$ctrl.email" ng-required="true"></labeled-input>\r\n          <labeled-input label="Senha" name="senha" ng-model="$ctrl.senha"></labeled-input>\r\n\r\n          <p><button type="submit" class="btn btn-sm btn-default">Entrar</button></p>\r\n          <p><button type="button" class="btn btn-sm btn-danger" ng-click="$ctrl.loginComGoogle()"><i class="fa fa-google"></i> Login com Google</button></p>\r\n          <p><button type="button" class="btn btn-sm btn-primary" ng-click="$ctrl.loginComFacebook()"><i class="fa fa-facebook"></i> Login com Facebook</button></p>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'),e.put("app/containers/Professor.html",'<div class="panel panel-default col-sm-3" ng-repeat="usuario in $ctrl.usuarios" ng-click="$ctrl.save(usuario.$id)">\r\n  <div class="panel-body">\r\n    <div class="media">\r\n      <div class="media-left">\r\n        <a href="javascript:void(0)">\r\n          <img ng-src="{{usuario.foto}}" style="width: 64px" class="img-circle">\r\n        </a>\r\n      </div>\r\n      <div class="media-body">\r\n        <h4 class="media-heading">{{usuario.nome}}</h4>\r\n        {{usuario.email}}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'),e.put("app/containers/Professores.html",'<card state="professor">\r\n  <div class="media">\r\n    <div class="media-left">\r\n      <i class="fa fa-plus fa-5x media-object"></i>\r\n    </div>\r\n    <div class="media-body">\r\n      <h4 class="media-heading">Novo Professor</h4>\r\n    </div>\r\n  </div>\r\n</card>\r\n\r\n<card ng-repeat="professor in $ctrl.professores">\r\n  <div class="media">\r\n    <div class="media-left">\r\n      <a href="javascript:void(0)">\r\n        <img ng-src="{{professor.foto}}" style="width: 70px" class="img-circle">\r\n      </a>\r\n    </div>\r\n    <div class="media-body">\r\n      <h4 class="media-heading">{{professor.nome}}</h4>\r\n      {{professor.email}}\r\n    </div>\r\n  </div>\r\n</card>\r\n')}]);
//# sourceMappingURL=../maps/scripts/app-48fa1f3d94.js.map
