"use strict";function convertNumberToDate(a){return new Date(a)}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function routesConfig(a,e,n){n.html5Mode(!0).hashPrefix("!"),e.otherwise("/"),a.state("app",{url:"/",template:"<app></app>",auth:!0}).state("alunos",{url:"/alunos",template:"<alunos></alunos>",auth:!0}).state("professores",{url:"/professores",template:"<professores></professores>",auth:!0}).state("aluno",{url:"/aluno/:id",controller:AlunoRoute,controllerAs:"ctrl",template:'<aluno id="ctrl.id"></aluno>',auth:!0}).state("professor",{url:"/professor",template:"<professor></professor>",auth:!0}).state("aulas",{url:"/aulas",template:"<aulas></aulas>",auth:!0}).state("aula",{url:"/aula/:id",controller:AulaRoute,controllerAs:"ctrl",template:'<aula id="ctrl.id"></aula>',auth:!0}).state("login",{url:"/login",template:"<login></login>",auth:!1})}routesConfig.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app",["ui.router","willcrisis.angular-auth","firebase","rt.select2","ui.bootstrap"]);var _createClass=function(){function a(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}}(),Aluno=function(){function a(e,n){_classCallCheck(this,a),this.stateService=e,this.alunoService=n,this.aluno=this.id?this.alunoService.get(this.id):{}}return a.$inject=["$state","alunoService"],_createClass(a,[{key:"save",value:function(a){a.$id?this.alunoService.edit(a):this.alunoService.add(a),this.stateService.go("alunos")}}]),a}();angular.module("app").component("aluno",{templateUrl:"app/containers/Aluno.html",controller:Aluno,bindings:{id:"<"}});var Alunos=["alunoService",function a(e){_classCallCheck(this,a),this.alunoService=e}];Alunos.$inject=["alunoService"],angular.module("app").component("alunos",{templateUrl:"app/containers/Alunos.html",controller:Alunos});var App=function e(){_classCallCheck(this,e)};angular.module("app").component("app",{templateUrl:"app/containers/App.html",controller:App});var _createClass=function(){function a(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}}(),Aula=function(){function a(e,n,t){_classCallCheck(this,a),this.stateService=e,this.aulaService=n,this.professorService=t,this.aula=this.id?this.aulaService.get(this.id):{}}return a.$inject=["$state","aulaService","professorService"],_createClass(a,[{key:"save",value:function(a){a.$id?this.aulaService.edit(a):this.aulaService.add(a),this.stateService.go("aulas")}}]),a}();angular.module("app").component("aula",{templateUrl:"app/containers/Aula.html",controller:Aula,bindings:{id:"<"}});var Aulas=["aulaService",function n(a){_classCallCheck(this,n),this.aulaService=a}];Aulas.$inject=["aulaService"],angular.module("app").component("aulas",{templateUrl:"app/containers/Aulas.html",controller:Aulas});var _createClass=function(){function a(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}}(),Login=function(){function a(e,n,t){_classCallCheck(this,a),this.authService=e,this.stateService=n,this.usuarioService=t}return a.$inject=["auth","$state","usuarioService"],_createClass(a,[{key:"login",value:function(a,e){var n=this;this.authService.loginWithEmailPassword(a,e).then(function(){n.stateService.go("app")})}},{key:"loginComGoogle",value:function(){var a=this;this.authService.loginWithGoogle().then(function(e){a.salvarUsuario(e),a.stateService.go("app")})}},{key:"loginComFacebook",value:function(){var a=this;this.authService.loginWithFacebook().then(function(e){console.log(e),a.salvarUsuario(e),a.stateService.go("app")})}},{key:"salvarUsuario",value:function(a){var e=this.usuarioService.get(a.uid);e.nome=a.displayName,e.email=a.email,e.foto=a.photoURL,e.$save()}}]),a}();angular.module("app").component("login",{templateUrl:"app/containers/Login.html",controller:Login});var _createClass=function(){function a(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}}(),Professor=function(){function a(e,n,t){var r=this;_classCallCheck(this,a),this.stateService=e,this.professorService=n,this.usuarios=[],t.list().$loaded().then(function(a){r.professorService.list().$loaded().then(function(e){var n=e.map(function(a){return a.$value});a.forEach(function(a){n.indexOf(a.$id)===-1&&r.usuarios.push(a)})})})}return a.$inject=["$state","professorService","usuarioService"],_createClass(a,[{key:"save",value:function(a){this.professorService.add(a),this.stateService.go("professores")}}]),a}();angular.module("app").component("professor",{templateUrl:"app/containers/Professor.html",controller:Professor});var Professores=["professorService","usuarioService",function t(a,e){var n=this;_classCallCheck(this,t),this.professorService=a,this.professores=[],this.professorService.list().$loaded().then(function(a){a.forEach(function(a){n.professores.push(e.get(a.$value))})})}];Professores.$inject=["professorService","usuarioService"],angular.module("app").component("professores",{templateUrl:"app/containers/Professores.html",controller:Professores});var Card=function r(){_classCallCheck(this,r),this.tamanho=this.tamanho||12};angular.module("app").component("card",{templateUrl:"app/components/Card.html",controller:Card,transclude:!0,bindings:{label:"@",state:"@",tamanho:"@"}});var CardUsuario=function l(){_classCallCheck(this,l),this.tamanho=this.tamanho||12};angular.module("app").component("cardUsuario",{templateUrl:"app/components/CardUsuario.html",controller:CardUsuario,bindings:{usuario:"<",tamanho:"@"}});var LabeledInput=function o(){_classCallCheck(this,o),this.type=this.type||"text"};angular.module("app").component("labeledInput",{templateUrl:"app/components/LabeledInput.html",controller:LabeledInput,bindings:{label:"@",name:"@",type:"@",ngModel:"=",ngRequired:"=?",ngReadonly:"=?",ngDisabled:"=?"}});var _createClass=function(){function a(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}}(),Menu=function(){function a(e,n){_classCallCheck(this,a),this.authService=e,this.stateService=n}return a.$inject=["auth","$state"],_createClass(a,[{key:"logout",value:function(){var a=this;this.authService.logout().then(function(){a.stateService.go("login")})}}]),a}();angular.module("app").component("menu",{templateUrl:"app/components/Menu.html",controller:Menu});var MenuItem=function s(){_classCallCheck(this,s)};angular.module("app").component("menuItem",{templateUrl:"app/components/MenuItem.html",controller:MenuItem,bindings:{label:"@",state:"&"}});var _createClass=function(){function a(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}}(),AlunoService=function(){function a(e,n){_classCallCheck(this,a),this.alunos=e(n.alunos)}return a.$inject=["$firebaseArray","dataService"],_createClass(a,[{key:"list",value:function(){return this.alunos}},{key:"get",value:function(a){var e=this.alunos.$getRecord(a);return e&&(e.dataNascimento=convertNumberToDate(e.dataNascimento)),e}},{key:"add",value:function(a){return a.dataNascimento=a.dataNascimento.getTime(),this.alunos.$add(a),this.list()}},{key:"edit",value:function(a){return a.dataNascimento=a.dataNascimento.getTime(),this.alunos.$save(a),this.list()}},{key:"remove",value:function(a){return this.alunos.$remove(a),this.list()}}]),a}();angular.module("app").service("alunoService",AlunoService);var _createClass=function(){function a(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}}(),AulaService=function(){function a(e,n){_classCallCheck(this,a),this.aulas=e(n.aulas)}return a.$inject=["$firebaseArray","dataService"],_createClass(a,[{key:"list",value:function(){return this.aulas}},{key:"get",value:function(a){var e=this.aulas.$getRecord(a);return e&&(e.data=convertNumberToDate(e.data)),e}},{key:"add",value:function(a){return a.data=a.data.getTime(),this.aulas.$add(aluno),this.list()}},{key:"edit",value:function(a){return a.data=a.data.getTime(),this.aulas.$save(a),this.list()}}]),a}();angular.module("app").service("aulaService",AulaService);var DataService=function i(){_classCallCheck(this,i),this.root=firebase.database().ref(),this.professores=this.root.child("professores"),this.alunos=this.root.child("alunos"),this.usuarios=this.root.child("usuarios"),this.aulas=this.root.child("aulas")};angular.module("app").service("dataService",DataService);var _createClass=function(){function a(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}}(),ProfessorService=function(){function a(e,n){_classCallCheck(this,a),this.professores=e(n.professores)}return a.$inject=["$firebaseArray","dataService"],_createClass(a,[{key:"list",value:function(){return this.professores}},{key:"add",value:function(a){return this.professores.$add(a),this.list()}},{key:"remove",value:function(a){return this.professores.$remove(a),this.list()}}]),a}();angular.module("app").service("professorService",ProfessorService);var _createClass=function(){function a(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}return function(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),e}}(),UsuarioService=function(){function a(e,n,t,r){_classCallCheck(this,a),this.usuarios=e(r.usuarios),this.firebaseObjectService=n,this.authService=t,this.dataService=r}return a.$inject=["$firebaseArray","$firebaseObject","auth","dataService"],_createClass(a,[{key:"list",value:function(){return this.usuarios}},{key:"get",value:function(a){return a||(a=this.authService.uid),this.firebaseObjectService(this.dataService.usuarios.child(a))}},{key:"add",value:function(a){return this.usuarios.$add(a),this.list()}},{key:"edit",value:function(a){return this.usuarios.$save(a),this.list()}},{key:"remove",value:function(a){return this.usuarios.$remove(a),this.list()}}]),a}();angular.module("app").service("usuarioService",UsuarioService);var AlunoRoute=["$stateParams",function u(a){_classCallCheck(this,u),this.id=a.id}];AlunoRoute.$inject=["$stateParams"];var AulaRoute=["$stateParams",function c(a){_classCallCheck(this,c),this.id=a.id}];AulaRoute.$inject=["$stateParams"],angular.module("app").config(routesConfig),angular.module("app").run(["$templateCache",function(a){a.put("app/components/Card.html",'<div class="panel panel-default col-sm-{{$ctrl.tamanho}}">\n  <div class="panel-body" ng-transclude="">\n  </div>\n</div>\n'),a.put("app/components/CardUsuario.html",'<card tamanho="{{$ctrl.tamanho}}">\n  <div class="media">\n    <div class="media-left">\n      <a href="javascript:void(0)">\n        <img ng-src="{{$ctrl.usuario.foto}}" style="width: 70px" class="img-circle">\n      </a>\n    </div>\n    <div class="media-body">\n      <h4 class="media-heading">{{$ctrl.usuario.nome}}</h4>\n      {{$ctrl.usuario.email}}\n    </div>\n  </div>\n</card>\n'),a.put("app/components/LabeledInput.html",'<div class="form-group">\r\n  <label class="control-label">{{$ctrl.label}}</label>\r\n  <input class="form-control" type="{{$ctrl.type}}" name="{{$ctrl.name}}" ng-model="$ctrl.ngModel" ng-required="$ctrl.ngRequired" ng-readonly="$ctrl.ngReadonly" ng-disabled="$ctrl.ngDisabled">\r\n</div>'),a.put("app/components/Menu.html",'<nav class="navbar navbar-inverse navbar-fixed-top">\r\n  <div class="container-fluid">\r\n    <div class="navbar-header">\r\n      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#menu-principal" aria-expanded="false" auth-logged-in="">\r\n        <span class="sr-only">Toggle navigation</span>\r\n        <span class="icon-bar"></span>\r\n        <span class="icon-bar"></span>\r\n        <span class="icon-bar"></span>\r\n      </button>\r\n      <a class="navbar-brand" href="javascript:void(0)" ui-sref="app">SemprePresente</a>\r\n    </div>\r\n    <div class="collapse navbar-collapse" id="menu-principal" auth-logged-in="">\r\n      <ul class="nav navbar-nav">\r\n        <li><a href="javascript:void(0)" ui-sref="app">Início</a></li>\r\n        <li><a href="javascript:void(0)" ui-sref="aulas">Aulas</a></li>\r\n        <li><a href="javascript:void(0)" ui-sref="alunos">Alunos</a></li>\r\n        <li><a href="javascript:void(0)" ui-sref="professores">Professores</a></li>\r\n      </ul>\r\n      <ul class="nav navbar-nav navbar-right">\r\n        <li class="dropdown">\r\n          <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><img ng-src="{{$ctrl.authService.photoURL}}" class="img-circle" style="width: 20px"> <auth-display-name></auth-display-name><span class="caret"></span></a>\r\n          <ul class="dropdown-menu">\r\n            <li><a href="javascript:void(0)" ng-click="$ctrl.logout()">Logout</a></li>\r\n          </ul>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</nav>\r\n'),a.put("app/components/MenuItem.html",'<a href="javascript:void(0)" ui-sref="{{$ctrl.state}}">{{$ctrl.label}}</a>'),a.put("app/containers/Aluno.html",'<form name="alunoForm" ng-submit="alunoForm.$valid && $ctrl.save($ctrl.aluno)">\n  <labeled-input label="Nome" name="nome" ng-model="$ctrl.aluno.nome" ng-required="true"></labeled-input>\n  <labeled-input label="Data de Nascimento" name="dataNascimento" ng-model="$ctrl.aluno.dataNascimento" ng-required="true" type="date"></labeled-input>\n  <labeled-input label="Telefone" name="telefone" ng-model="$ctrl.aluno.telefone"></labeled-input>\n  <labeled-input label="Nome do Pai" name="pai" ng-model="$ctrl.aluno.pai"></labeled-input>\n  <labeled-input label="Nome da Mãe" name="mae" ng-model="$ctrl.aluno.mae"></labeled-input>\n  <labeled-input label="Telefone do Responsável" name="telefoneResponsavel" ng-model="$ctrl.aluno.telefoneResponsavel"></labeled-input>\n\n  <div class="action-buttons">\n    <button type="button" class="btn btn-default" ui-sref="alunos">Cancelar</button>\n    <button class="btn btn-primary" type="submit">Salvar</button>\n  </div>\n</form>\n'),a.put("app/containers/Alunos.html",'<p>\n  <a href="javascript:void(0)" ui-sref="aluno" class="btn btn-default">Novo Aluno</a>\n</p>\n<card tamanho="12" ng-repeat="item in $ctrl.alunoService.list()" ui-sref="aluno({id:item.$id})">\n  {{item.nome}}\n</card>\n'),a.put("app/containers/App.html",'<card ui-sref="aluno">Novo Aluno</card>\n<card ui-sref="aula">Nova Aula</card>\n<card ui-sref="aulas">Aulas</card>\n<card ui-sref="alunos">Alunos</card>\n<card ui-sref="professores">Professores</card>\n<card ui-sref="professor">Novo Professor</card>\n'),a.put("app/containers/Aula.html",'<form name="aulaForm" ng-submit="aulaForm.$valid && $ctrl.save($ctrl.aula)">\n  <labeled-input label="Data" name="data" ng-model="$ctrl.aula.data" ng-required="true" type="date"></labeled-input>\n  <labeled-input label="Lição" name="licao" ng-model="$ctrl.aula.licao" ng-required="true"></labeled-input>\n  <labeled-input label="Observações" name="observacoes" ng-model="$ctrl.aula.observacoes"></labeled-input>\n\n  <div class="action-buttons">\n    <button type="button" class="btn btn-default">Cancelar</button>\n    <button class="btn btn-primary" type="submit">Salvar</button>\n  </div>\n</form>\n'),a.put("app/containers/Aulas.html",'<p>\n  <a href="javascript:void(0)" ui-sref="aula" class="btn btn-default">Nova Aula</a>\n</p>\n<card ng-repeat="item in $ctrl.aulaService.list()" ui-sref="aula({id: item.id})">\n  {{item.data | date}}\n</card>\n'),a.put("app/containers/Login.html",'<div class="container" style="margin-top:30px">\r\n  <div class="col-md-4 col-md-offset-4">\r\n    <div class="panel panel-default">\r\n      <div class="panel-heading"><h3 class="panel-title"><strong>Login</strong></h3></div>\r\n      <div class="panel-body">\r\n        <form name="loginForm" role="form" ng-submit="loginForm.$valid && $ctrl.login($ctrl.email, $ctrl.senha)">\r\n          <labeled-input label="E-mail" name="email" ng-model="$ctrl.email" ng-required="true"></labeled-input>\r\n          <labeled-input label="Senha" name="senha" ng-model="$ctrl.senha"></labeled-input>\r\n\r\n          <p><button type="submit" class="btn btn-sm btn-default">Entrar</button></p>\r\n          <p><button type="button" class="btn btn-sm btn-danger" ng-click="$ctrl.loginComGoogle()"><i class="fa fa-google"></i> Login com Google</button></p>\r\n          <p><button type="button" class="btn btn-sm btn-primary" ng-click="$ctrl.loginComFacebook()"><i class="fa fa-facebook"></i> Login com Facebook</button></p>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'),a.put("app/containers/Professor.html",'<card-usuario ng-repeat="usuario in $ctrl.usuarios" usuario="usuario" ng-click="$ctrl.save(usuario.$id)"></card-usuario>\n'),a.put("app/containers/Professores.html",'<card ui-sref="professor">\n  <div class="media">\n    <div class="media-left">\n      <i class="fa fa-plus fa-5x media-object"></i>\n    </div>\n    <div class="media-body">\n      <h4 class="media-heading">Novo Professor</h4>\n    </div>\n  </div>\n</card>\n\n<card-usuario ng-repeat="professor in $ctrl.professores" usuario="professor"></card-usuario>\n')}]);
//# sourceMappingURL=../maps/scripts/app.js.map
